<html>
    <head>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <meta name="viewport" content='width=device-width, initial-scale=1.0,text/html,charset=utf-8' >
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Kanit&display=swap" rel="stylesheet">
    <style>
        body {
           /* background-image: linear-gradient(#e0fff6, #ccfbed,#a3fbe1); */
           background-image: linear-gradient(#f5f5f5, #f5f5f5,#f5f5f5);
           /* background-color: #f5f5f5; */
         
           width:100vw;
           height:100vh;
           margin:0px;
           opacity: 0.8;
           font-family: 'Kanit', sans-serif;
           font-size:small;
           color:#969393;
           align-items:center;
        }
        
    </style>
</head>

<body id="myBody"  >
    <svg overflow="auto" width="100%" height="100%" id="svgOne" >
        <defs>
            <filter id="dropshadow" x="-40%" y="-40%" width="180%" height="180%" filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB">
            <feComponentTransfer in="SourceAlpha">
                <feFuncR type="discrete" tableValues="1"/>
                <feFuncG type="discrete" tableValues="0"/>
                <feFuncB type="discrete" tableValues="0"/>
            </feComponentTransfer>
              <feGaussianBlur in="SourceAlpha" stdDeviation="1"/> <!-- stdDeviation is how much to blur -->
              <feOffset dx="3" dy="3" result="offsetblur"/>
              <feOffset dx="-2" dy="-2" result="offsetblur"/>
              <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <filter x="0" y="0" width="1" height="1" id="solid">
              <feFlood flood-color="yellow"/>
              <feComposite in="SourceGraphic" operator="xor" />
            </filter>
          </defs>
          <defs>
            <clipPath id="myCircle">
               <circle cx="25" cy="25" r="25" fill="#FFFFFF" stroke="blue"  stroke-width = "0.5%"/>
            </clipPath>
         </defs>
         <defs>
          <pattern id="textstripe" patternUnits="userSpaceOnUse" width="400" height="200" patternTransform="rotate(-45)">
              <image href="images/ffc_logo_color.jpg" width="200"  opacity="0.1"  ></image>
          </pattern>
         </defs>
         <rect width="100%" height="100%" fill="url(#textstripe)" />
<!--        <clipPath id="circle-mask">-->
<!--            <circle cx="15" cy="15" r="15" />-->
<!--        </clipPath>-->
    </svg>

    <!-- <link rel="stylesheet" href="css/genogram.css"> -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/genogram.js"></script>
    <!-- <script src="data/50.js"></script> -->
    <!-- <script src="data/555_5.js"></script> -->
    <!-- <script src="data/76_2.js"></script> -->
    <!-- <script src="data/71.js"></script> -->
    <!-- <script src="data/104_1.js"></script> -->
     <!-- <script src="data/63.js"></script> -->
     <!-- <script src="data/235_1.js"></script> -->
    <script src="data/200.js"></script>
    <script type="text/javascript">
           var withContent = 0;
           var minX = 0;
           function initialize(personId,data,width,height){
                var sourceGenogram =[data];
                 var svgOne = document.getElementById("svgOne");
                 svgOne.setAttribute("width",width);
                 svgOne.setAttribute("height",height);
                 DisplayGenogram(personId,sourceGenogram);
           }
           function getWidthContent(){
              return withContent;
           }
           function getFirstPosition(){
             return minX;
           }
           function DisplayGenogram(personId,sourceGenogram){
                  var svgOne = document.getElementById("svgOne");
                  var transform = new TransformData(sourceGenogram)
                  var tran = transform.Transform();
                  var data = tran[0].data;
                  var spouse = tran[0].spouse;
                  var twin = tran[0].twin;
                  debugger;
                  var idCard = transform.getIdCardBySysId(personId);
                //   console.log('------ idCard ------- :'+idCard);
                //   console.log('data:'+JSON.stringify(data));
                //   console.log('spouse:'+JSON.stringify(spouse));
                //   console.log('twin:'+JSON.stringify(twin));
                  //alert('data:'+JSON.stringify(data));
                  // var validate = new ValidateData(data,spouse,twin,idCard);
                  // if(validate.isValid()){
                  //   var myGenogram = new genogramSymbol(data,spouse,twin,idCard);
                  //   myGenogram.GenerateGenogram(idCard);
                  //   withContent = myGenogram.getWidthContent();
                  //   minX = myGenogram.getFirstPosition();
                  // }
                  // else
                  // {
                  //      Android.showToast("ข้อมูลไม่ถูกต้อง\n"+validate.getErrorMessage());
                  //      //alert("ข้อมูลไม่ถูกต้อง\n"+validate.getErrorMessage());
                  // }
                
                  var validate = new ValidateData(data,spouse,twin,idCard);
                  if(!validate.isValid()){
                       //Android.showToast("ข้อมูลไม่ถูกต้อง\n"+validate.getErrorMessage());
                       Android.showMessage();
                       //alert("ข้อมูลไม่ถูกต้อง\n"+validate.getErrorMessage());
                  }
                  var myGenogram = new genogramSymbol(data,spouse,twin,idCard);
                    myGenogram.GenerateGenogram(idCard);
                    withContent = myGenogram.getWidthContent();
                    minX = myGenogram.getFirstPosition();
            }
            document.addEventListener("DOMContentLoaded", function(event) {
                var local=false;
                if(local){
                    // var personId = '5e5dd6c7806ff40004f145ea'; // 63
                    // var personId = '5e5dd6cf806ff40004f146f2'; // 52
                    // var personId = '5ec7a84baf76540004a4b62c'; // data_20200522.json
                    // var personId = '5ec7a84faf76540004a4b638';
                    // var personId = '5e5dd6de806ff40004f14821' // 50
                    // var personId = '5e5dd6de806ff40004f1483d' // 76/2
                    // var personId = '5ee38f1c644fd300048963a2'; // จิระอนันท์
                    // var personId = '5e5dd6cf806ff40004f146ea'; // 71 
                    // var personId = '5e5dd738806ff40004f15343'; // 3_1
                    // var personId = '5e5dd6de806ff40004f148b0'; // 104/1

                    // var personId = '5e5dd738806ff40004f1534e'; // 63
                    // var personId = '5e5dd717806ff40004f14eb1'; // 235_1
                    var personId = '5e5dd708806ff40004f14d3b'; // 200
                    DisplayGenogram(personId,sourceGenogram);

                }
            });

    </script>

</body>
</html>
